namespace = sealand_mercs_fl_base_event
#### CAWA ####
# Gives the modifier on capital:
country_event = {
	id = sealand_mercs_fl_base_event.1
	title = none
	desc = none
	picture = MYSTIC_IN_PRAYER_eventPicture
	hidden = yes
	mean_time_to_happen = { days = 5 }
	trigger = {
		#always = no # Turned off
		#NOT = { has_country_flag = sealandmercs_switch_merc_flag }
		OR = { # For special units:
			has_estate_privilege = estate_nobles_spain_tercios_special_units_pike
			has_estate_privilege = estate_nobles_spain_tercios_special_units_fire
			has_estate_privilege = estate_nobles_varangian_guards_special_units 
		}
		ai = no
		NOT = { any_owned_province = { has_province_modifier = sealand_cawa_fl_base } }
	}
	immediate = {
		if = {
			limit = { NOT = { has_country_modifier = sealand_cawa_base_maintenance } }
			add_country_modifier = {
				name = sealand_cawa_base_maintenance
				duration = -1
				hidden = yes
			}
		}
		capital_scope = {
			add_province_modifier = {
				name = sealand_cawa_fl_base
				duration = -1
				hidden = yes
			}
		}
	}
	option = { }
}
# More than 2 provinces with modifiers failsafe:
country_event = {
	id = sealand_mercs_fl_base_event.2
	title = none
	desc = none
	picture = MYSTIC_IN_PRAYER_eventPicture
	hidden = yes
	mean_time_to_happen = { days = 5 }
	trigger = {
		#always = no # Turned off
		#NOT = { has_country_flag = sealandmercs_switch_merc_flag }
		OR = { # For special units:
			has_estate_privilege = estate_nobles_spain_tercios_special_units_pike
			has_estate_privilege = estate_nobles_spain_tercios_special_units_fire
			has_estate_privilege = estate_nobles_varangian_guards_special_units 
		}
		ai = no
		num_of_owned_provinces_with = {
			value = 2
			has_province_modifier = sealand_cawa_fl_base
		}
	}
	immediate = {
		every_owned_province = {
			limit = { is_capital = no }
			remove_province_modifier = sealand_cawa_fl_base
		}
	}
	option = { }
}
# Removed for AI:
country_event = {
	id = sealand_mercs_fl_base_event.3
	title = none
	desc = none
	picture = MYSTIC_IN_PRAYER_eventPicture
	hidden = yes
	mean_time_to_happen = { days = 5 }
	trigger = {
		always = no # Turned off
		#NOT = { has_country_flag = sealandmercs_switch_merc_flag }
		ai = yes
		any_owned_province = { has_province_modifier = sealand_cawa_fl_base }
	}
	immediate = {
		every_owned_province = { remove_province_modifier = sealand_cawa_fl_base }
	}
	option = { }
}
#### BANNER #### SINCE CAWA BARELY BEING MUCH MODDALE AND FOUND OUT FEW ISSUES BIT TOO LATE ON THE MAKING, THEN BANNER STILL IS PRETTY MUCH MJL THAN IT WAS BEFORE, JUST SLIGHTLY CHANGED BUT I KEPT IT LIKE THIS, IN CASE PDX DECIDES TO MAKE CAWA MORE MODDABLE OR SOMETHING...
# Gives the modifier on any province:
country_event = {
	id = sealand_mercs_fl_base_event.4
	title = none
	desc = none
	picture = MYSTIC_IN_PRAYER_eventPicture
	hidden = yes
	mean_time_to_happen = { days = 5 }
	trigger = {
		#has_country_flag = sealandmercs_switch_merc_flag
		ai = no
		variable_arithmetic_trigger = {
			custom_tooltip = vat_banner_new_value
			export_to_variable = {
				which = banner_forcelimit
				value = trigger_value:land_forcelimit
			}
			multiply_variable = {
				which = banner_forcelimit
				value = 30
			}
			divide_variable = {
				which = banner_forcelimit
				value = 100
			}
			change_variable = {
				which = banner_forcelimit
				value = 10
			}
			NOT = {
				is_variable_equal = {
					which = banner_forcelimit
					which = current_banner_forcelimit
				}
			}
		}
	}
	immediate = {
		check_num_of_banners = yes
		remove_banner_fl_modifiers = yes
		set_banner_fl_modifiers = yes
	}
	option = { }
}
# More than 2 provinces with modifiers failsafe:
country_event = {
	id = sealand_mercs_fl_base_event.5
	title = none
	desc = none
	picture = MYSTIC_IN_PRAYER_eventPicture
	hidden = yes
	mean_time_to_happen = { days = 5 }
	trigger = {
		#has_country_flag = sealandmercs_switch_merc_flag
		ai = no
		num_of_owned_provinces_with = {
			value = 2
			has_province_flag = sealand_banners_fl_base_flag
		}
	}
	immediate = {
		check_num_of_banners = yes
		remove_banner_fl_modifiers = yes
		set_banner_fl_modifiers = yes
	}
	option = { }
}
# Removed for AI:
country_event = {
	id = sealand_mercs_fl_base_event.6
	title = none
	desc = none
	picture = MYSTIC_IN_PRAYER_eventPicture
	hidden = yes
	mean_time_to_happen = { days = 1 }
	trigger = {
		#has_country_flag = sealandmercs_switch_merc_flag
		ai = yes
		any_owned_province = {
			OR = {
				has_province_flag = sealand_banners_fl_base_flag
				has_province_modifier = sealand_banners_fl_base_512
				has_province_modifier = sealand_banners_fl_base_256
				has_province_modifier = sealand_banners_fl_base_128
				has_province_modifier = sealand_banners_fl_base_64
				has_province_modifier = sealand_banners_fl_base_32
				has_province_modifier = sealand_banners_fl_base_16
				has_province_modifier = sealand_banners_fl_base_8
				has_province_modifier = sealand_banners_fl_base_4
				has_province_modifier = sealand_banners_fl_base_2
				has_province_modifier = sealand_banners_fl_base_1
			}
		}
	}
	immediate = {
		remove_banner_fl_modifiers = yes
	}
	option = { }
}