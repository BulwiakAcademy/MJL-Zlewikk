##########
# Muslim:
custom_button = {
	name = sea_low_piety_action
	potential = { uses_piety = yes ai = no }
	trigger = {
		hidden_trigger = {
			OR = {
				NOT = { has_country_flag = sea_low_piety_action_flag }
				had_country_flag = { flag = sea_low_piety_action_flag days = 1825 }
			}
			NOT = { piety = -0.76 }
		}
		if = {
			limit = { has_country_modifier = slackening_modifier }
			NOT = { has_country_modifier = slackening_modifier }
		}
	}
	effect = {
		tooltip = { add_yearly_manpower = 1 }
		if = {
			limit = { NOT = { has_country_flag = sea_piety_action_confirm_flag } }
			set_country_flag = sea_piety_action_confirm_flag
			if = {
				limit = { has_country_flag = sea_low_piety_action_flag NOT = { had_country_flag = { flag = sea_low_piety_action_flag days = 1825 } } }
				custom_tooltip = sea_low_piety_action_cooldown_tt
			}
		}
	}
	tooltip = sea_low_piety_action_tt
}
custom_button = {
	name = sea_high_piety_action
	potential = { uses_piety = yes ai = no }
	trigger = {
		hidden_trigger = {
			OR = {
				NOT = { has_country_flag = sea_high_piety_action_flag }
				had_country_flag = { flag = sea_high_piety_action_flag days = 1825 }
			}
			piety = 0.75
		}
	}
	effect = {
		tooltip = { add_corruption = -2 }
		if = {
			limit = { NOT = { has_country_flag = sea_piety_action_confirm_flag } }
			set_country_flag = sea_piety_action_confirm_flag
			if = {
				limit = { has_country_flag = sea_high_piety_action_flag NOT = { had_country_flag = { flag = sea_high_piety_action_flag days = 1825 } } }
				custom_tooltip = sea_high_piety_action_cooldown_tt
			}
		}
	}
	tooltip = sea_high_piety_action_tt
}

custom_icon = {
	name = sea_piety_action_confirm_background
	potential = { has_country_flag = sea_piety_action_confirm_flag }
}
custom_button = {
	name = sea_piety_action_not_confirm
	potential = { has_country_flag = sea_piety_action_confirm_flag }
	effect = { clr_country_flag = sea_piety_action_confirm_flag }
}
custom_button = {
	name = sea_piety_action_confirm
	potential = { has_country_flag = sea_piety_action_confirm_flag }
	effect = {
		clr_country_flag = sea_piety_action_confirm_flag
		if = {
			limit = {
				NOT = { piety = -0.76 }
				NOT = { has_country_modifier = slackening_modifier }
			}
			add_yearly_manpower = 1
			hidden_effect = { add_piety = 0.5 }
			set_country_flag = sea_low_piety_action_flag
			hidden_effect = {
				export_to_variable = { which = sea_low_piety_action_was_set_year value = trigger_value:is_year }
				export_to_variable = { which = sea_low_piety_action_was_set_month value = trigger_value:is_month }
				set_variable = { which = sea_low_piety_action_length value = 5 }
				change_variable = { which = sea_low_piety_action_length which = sea_low_piety_action_was_set_year }
			}
		}
		else_if = {
			limit = {
				NOT = { piety = -0.76 }
				has_country_modifier = slackening_modifier
			}
			custom_tooltip = sea_piety_action_confirm_tt
		}
		if = {
			limit = {
				piety = 0.75
			}
			add_corruption = -2
			hidden_effect = { add_piety = -0.5 }
			set_country_flag = sea_high_piety_action_flag
			hidden_effect = {
				export_to_variable = { which = sea_high_piety_action_was_set_year value = trigger_value:is_year }
				export_to_variable = { which = sea_high_piety_action_was_set_month value = trigger_value:is_month }
				set_variable = { which = sea_high_piety_action_length value = 5 }
				change_variable = { which = sea_high_piety_action_length which = sea_high_piety_action_was_set_year }
			}
		}
	}
}
##########
# Ages:
custom_button = {
	name = sea_ages_button
	trigger = { splendor = 800 }
	effect = {
		add_splendor = -800
		change_government_reform_progress = 50
	}
	tooltip = sea_ages_button_tt
}
##########
# Religion:
#custom_window = {
#	name = sea_primitive_religion_window
#	potential = { OR = { religion = animism religion = inti religion = nahuatl religion = mesoamerican_religion } }
#}
#custom_icon = {
#	name = sea_primitive_religion_background
#}
#custom_text_box = {
#	name = sea_primitive_religion_name
#	potential = { NOT = { has_country_flag = sea_primitive_religion_reform_flag } }
#	tooltip = sea_primitive_religion_name_and_value_tt
#}
#custom_text_box = {
#	name = sea_primitive_religion_value
#	potential = { NOT = { has_country_flag = sea_primitive_religion_reform_flag } }
#	tooltip = sea_primitive_religion_name_and_value_tt
#}
#custom_button = {
#	name = sea_primitive_religion_reform_button
#	potential = { NOT = { has_country_flag = sea_primitive_religion_reform_flag } }
#	trigger = {
#		hidden_trigger = {
#			check_variable = {
#				which = sea_primitive_religion_reform_amount
#				value = 5
#			}
#		}
#	}
#	effect = { set_country_flag = sea_primitive_religion_reform_flag }
#}
#custom_button = {
#	name = sea_primitive_religion_modifier_button_
#	potential = { NOT = { has_country_flag = sea_primitive_religion_reform_flag } }
#	trigger = { always = yes } # DD
#	effect = { set_country_flag = sea_primitive_religion_reform_flag }
#	tooltip = sea_primitive_religion_modifier_button_tt
#}
##########
# Colonization:
custom_button = {
	name = sea_frontier_button
	potential = {
		FROM = {
			OR = {
				has_country_flag = mesoamerica_american_frontiers_flag
				AND = {
					OR = {
						has_mission = CSU_chanka
						has_mission = CSU_ground_shaker
					}
					INC_has_any_provinces_to_colonize = yes
				}
			}
		}
	}
	trigger = {
		any_neighbor_province = {
			owned_by = FROM
			is_in_capital_area = yes
		}
		is_colony = no
		if = {
			limit = { FROM = { has_country_flag = mesoamerica_american_frontiers_flag } }
			FROM = {
				government_reform_progress = 5
				mil_power = 5
				manpower = 0.5
			}
			OR = {
				continent = north_america
				continent = south_america
			}
		}
		if = {
			limit = {
				FROM = {
					AND = {
						OR = {
							has_mission = CSU_chanka
							has_mission = CSU_ground_shaker
						}
						INC_has_any_provinces_to_colonize = yes
					}
				}
			}
			FROM = {
				treasury = 50
				mil_power = 10
				manpower = 0.1
			}
			INC_can_be_colonized_without_natives = yes
		}
	}
	effect = {
		if = {
			limit = { FROM = { has_country_flag = mesoamerica_american_frontiers_flag } }
			save_event_target_as = sea_siberian_frontier
			FROM = {
				change_government_reform_progress = -5
				add_mil_power = -5
				add_manpower = -0.5
				hidden_effect = { country_event = { id = sealand_events.31 } }
			}
			tooltip = { add_siberian_construction = 100 }
				
		}
		if = {
			limit = {
				FROM = {
					AND = {
						OR = {
							has_mission = CSU_chanka
							has_mission = CSU_ground_shaker
						}
						INC_has_any_provinces_to_colonize = yes
					}
				}
			}
			save_event_target_as = sea_siberian_frontier
			FROM = {
				add_treasury = -50
				add_mil_power = -10
				add_manpower = -0.1
				hidden_effect = { country_event = { id = sealand_events.31 } }
			}
			tooltip = { add_siberian_construction = 100 }
		}
	}
	tooltip = sea_frontier_button_tt
}